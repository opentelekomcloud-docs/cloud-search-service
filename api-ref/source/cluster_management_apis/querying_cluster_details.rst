:original_name: css_03_0026.html

.. _css_03_0026:

Querying Cluster Details
========================

Function
--------

This API is used to query and display the details of a cluster.

URI
---

GET /v1.0/{project_id}/clusters/{cluster_id}

.. table:: **Table 1** Path Parameters

   ========== ========= ====== ====================================
   Parameter  Mandatory Type   Description
   ========== ========= ====== ====================================
   project_id Yes       String Project ID.
   cluster_id Yes       String ID of the cluster you want to query.
   ========== ========= ====== ====================================

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 2** Response body parameters

   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                          | Description                                                                                                                                                                                                                                                                  |
   +=======================+===============================================================================================+==============================================================================================================================================================================================================================================================================+
   | datastore             | :ref:`ClusterDetailDatastore <css_03_0026__response_clusterdetaildatastore>` object           | Search engine.                                                                                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | instances             | Array of :ref:`ClusterDetailInstances <css_03_0026__response_clusterdetailinstances>` objects | List of node objects.                                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | publicKibanaResp      | :ref:`publicKibanaRespBody <css_03_0026__response_publickibanarespbody>` object               | Kibana public network access information.                                                                                                                                                                                                                                    |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | elbWhiteList          | :ref:`elbWhiteListResp <css_03_0026__response_elbwhitelistresp>` object                       | Public network access information.                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated               | String                                                                                        | Last modification time of a cluster. The format is **ISO8601: CCYY-MM-DDThh:mm:ss**.                                                                                                                                                                                         |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                                                                                        | Cluster name                                                                                                                                                                                                                                                                 |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | publicIp              | String                                                                                        | Public IP address information.                                                                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created               | String                                                                                        | Cluster creation time. The format is **ISO8601: CCYY-MM-DDThh:mm:ss**.                                                                                                                                                                                                       |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | String                                                                                        | Cluster ID.                                                                                                                                                                                                                                                                  |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | String                                                                                        | Cluster status.                                                                                                                                                                                                                                                              |
   |                       |                                                                                               |                                                                                                                                                                                                                                                                              |
   |                       |                                                                                               | -  **100**: An operation, such as creation, is in progress.                                                                                                                                                                                                                  |
   |                       |                                                                                               | -  **200**: Available.                                                                                                                                                                                                                                                       |
   |                       |                                                                                               | -  **303**: Unavailable, for example, due to a creation failure.                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | endpoint              | String                                                                                        | IP address and port number of the user used to access the VPC.                                                                                                                                                                                                               |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpcId                 | String                                                                                        | VPC ID                                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | subnetId              | String                                                                                        | Subnet ID                                                                                                                                                                                                                                                                    |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | securityGroupId       | String                                                                                        | Security group ID.                                                                                                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpcepIp               | String                                                                                        | Endpoint IP address.                                                                                                                                                                                                                                                         |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bandwidthSize         | Integer                                                                                       | Public network bandwidth. Unit: Mbit/s                                                                                                                                                                                                                                       |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | httpsEnable           | Boolean                                                                                       | Communication encryption status.                                                                                                                                                                                                                                             |
   |                       |                                                                                               |                                                                                                                                                                                                                                                                              |
   |                       |                                                                                               | -  **false**: Communication encryption is not enabled.                                                                                                                                                                                                                       |
   |                       |                                                                                               | -  **true**: Communication encryption is enabled.                                                                                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | diskEncrypted         | Boolean                                                                                       | Whether disks are encrypted.                                                                                                                                                                                                                                                 |
   |                       |                                                                                               |                                                                                                                                                                                                                                                                              |
   |                       |                                                                                               | -  **true**: Disks are encrypted.                                                                                                                                                                                                                                            |
   |                       |                                                                                               | -  **false**: Disk are not encrypted.                                                                                                                                                                                                                                        |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | authorityEnable       | Boolean                                                                                       | Whether to enable authentication. The value can be **true** or **false**. Authentication is disabled by default.                                                                                                                                                             |
   |                       |                                                                                               |                                                                                                                                                                                                                                                                              |
   |                       |                                                                                               | -  **true**: Authentication is enabled for the cluster.                                                                                                                                                                                                                      |
   |                       |                                                                                               | -  **false**: Authentication is not enabled for the cluster.                                                                                                                                                                                                                 |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | backupAvailable       | Boolean                                                                                       | Whether the snapshot function is enabled.                                                                                                                                                                                                                                    |
   |                       |                                                                                               |                                                                                                                                                                                                                                                                              |
   |                       |                                                                                               | -  **true**: The snapshot function is enabled.                                                                                                                                                                                                                               |
   |                       |                                                                                               | -  **false**: The snapshot function is disabled.                                                                                                                                                                                                                             |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | actionProgress        | Object                                                                                        | Cluster behavior progress, which shows the progress of cluster creation and scaling in percentage.                                                                                                                                                                           |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | actions               | Array of strings                                                                              | Current behavior of a cluster. **REBOOTING** indicates that the cluster is being restarted. **GROWING** indicates that the cluster is being scaled. **RESTORING** indicates that the cluster is being restored. **SNAPSHOTTING** indicates that a snapshot is being created. |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterpriseProjectId   | String                                                                                        | ID of the enterprise project that a cluster belongs to.                                                                                                                                                                                                                      |
   |                       |                                                                                               |                                                                                                                                                                                                                                                                              |
   |                       |                                                                                               | If the user of the cluster does not enable the enterprise project, the setting of this parameter is not returned.                                                                                                                                                            |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags                  | Array of :ref:`ClusterDetailTags <css_03_0026__response_clusterdetailtags>` objects           | Cluster tag.                                                                                                                                                                                                                                                                 |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | failedReason          | :ref:`ClusterDetailFailedReasons <css_03_0026__response_clusterdetailfailedreasons>` object   | Failure cause. If the cluster is in the available status, this parameter is not returned.                                                                                                                                                                                    |
   +-----------------------+-----------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _css_03_0026__response_clusterdetaildatastore:

.. table:: **Table 3** ClusterDetailDatastore

   +-----------+--------+----------------------------------------------------------------------------------------------------------+
   | Parameter | Type   | Description                                                                                              |
   +===========+========+==========================================================================================================+
   | type      | String | Engine type. Currently, only Elasticsearch is supported.                                                 |
   +-----------+--------+----------------------------------------------------------------------------------------------------------+
   | version   | String | Version of the CSS cluster engine. For details, see CSS :ref:`Supported Cluster Versions <css_03_0056>`. |
   +-----------+--------+----------------------------------------------------------------------------------------------------------+

.. _css_03_0026__response_clusterdetailinstances:

.. table:: **Table 4** ClusterDetailInstances

   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | Parameter             | Type                                                                            | Description                                                      |
   +=======================+=================================================================================+==================================================================+
   | status                | String                                                                          | Node status value.                                               |
   |                       |                                                                                 |                                                                  |
   |                       |                                                                                 | -  **100**: An operation, such as creation, is in progress.      |
   |                       |                                                                                 | -  **200**: Available.                                           |
   |                       |                                                                                 | -  **303**: Unavailable, for example, due to a creation failure. |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | type                  | String                                                                          | Type of the current node.                                        |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | id                    | String                                                                          | Instance ID.                                                     |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | name                  | String                                                                          | Instance name.                                                   |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | specCode              | String                                                                          | Node specifications.                                             |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | azCode                | String                                                                          | AZ of a node.                                                    |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | ip                    | String                                                                          | Instance IP address.                                             |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+
   | volume                | :ref:`ShowClusterVolumeRsp <css_03_0026__response_showclustervolumersp>` object | Instance disk information                                        |
   +-----------------------+---------------------------------------------------------------------------------+------------------------------------------------------------------+

.. _css_03_0026__response_showclustervolumersp:

.. table:: **Table 5** ShowClusterVolumeRsp

   ========= ======= ==================
   Parameter Type    Description
   ========= ======= ==================
   type      String  Instance disk type
   size      Integer Instance disk size
   ========= ======= ==================

.. _css_03_0026__response_publickibanarespbody:

.. table:: **Table 6** publicKibanaRespBody

   +------------------+-------------------------------------------------------------------------------------+------------------------------------------------+
   | Parameter        | Type                                                                                | Description                                    |
   +==================+=====================================================================================+================================================+
   | eipSize          | Integer                                                                             | Bandwidth range. Unit: Mbit/s                  |
   +------------------+-------------------------------------------------------------------------------------+------------------------------------------------+
   | elbWhiteListResp | :ref:`kibanaElbWhiteListResp <css_03_0026__response_kibanaelbwhitelistresp>` object | Kibana public network access information.      |
   +------------------+-------------------------------------------------------------------------------------+------------------------------------------------+
   | publicKibanaIp   | String                                                                              | Specifies the IP address for accessing Kibana. |
   +------------------+-------------------------------------------------------------------------------------+------------------------------------------------+

.. _css_03_0026__response_kibanaelbwhitelistresp:

.. table:: **Table 7** kibanaElbWhiteListResp

   +-----------------------+-----------------------+---------------------------------------------------+
   | Parameter             | Type                  | Description                                       |
   +=======================+=======================+===================================================+
   | enableWhiteList       | Boolean               | Whether the Kibana access control is enabled.     |
   |                       |                       |                                                   |
   |                       |                       | -  **true**: Access control is enabled.           |
   |                       |                       | -  **false**: Access control is disabled.         |
   +-----------------------+-----------------------+---------------------------------------------------+
   | whiteList             | String                | Whitelist of public network for accessing Kibana. |
   +-----------------------+-----------------------+---------------------------------------------------+

.. _css_03_0026__response_elbwhitelistresp:

.. table:: **Table 8** elbWhiteListResp

   +-----------------------+-----------------------+----------------------------------------------------------+
   | Parameter             | Type                  | Description                                              |
   +=======================+=======================+==========================================================+
   | enableWhiteList       | Boolean               | Whether the public network access control is enabled.    |
   |                       |                       |                                                          |
   |                       |                       | -  **true**: Public network access control is enabled.   |
   |                       |                       | -  **false**: Public network access control is disabled. |
   +-----------------------+-----------------------+----------------------------------------------------------+
   | whiteList             | String                | Whitelist for public network access.                     |
   +-----------------------+-----------------------+----------------------------------------------------------+

.. _css_03_0026__response_clusterdetailtags:

.. table:: **Table 9** ClusterDetailTags

   ========= ====== ===========
   Parameter Type   Description
   ========= ====== ===========
   key       String Tag key.
   value     String Tag value.
   ========= ====== ===========

.. _css_03_0026__response_clusterdetailfailedreasons:

.. table:: **Table 10** ClusterDetailFailedReasons

   +-----------------------+-----------------------+-----------------------------------------------------------+
   | Parameter             | Type                  | Description                                               |
   +=======================+=======================+===========================================================+
   | errorCode             | String                | Error code.                                               |
   |                       |                       |                                                           |
   |                       |                       | -  **CSS.6000**: A cluster fails to be created.           |
   |                       |                       | -  **CSS.6001**: A cluster fails to be scaled out.        |
   |                       |                       | -  **CSS.6002**: A cluster fails to be restarted.         |
   |                       |                       | -  **CSS.6004**: A node fails to be created in a cluster. |
   |                       |                       | -  **CSS.6005**: A service fails to be initialized.       |
   +-----------------------+-----------------------+-----------------------------------------------------------+
   | errorMsg              | String                | Error details.                                            |
   +-----------------------+-----------------------+-----------------------------------------------------------+

Example Requests
----------------

None

Example Responses
-----------------

**Status code: 200**

Request succeeded.

.. code-block::

   {
     "datastore" : {
       "type" : "elasticsearch",
       "version" : "x.x.x"
     },
     "instances" : [ {
       "status" : "200",
       "type" : "ess",
       "id" : "3c7fe582-a9f6-46fd-9d01-956bed4a8bbc",
       "name" : "ES-1-16-test17-ess-esn-1-1",
       "specCode" : "css.xlarge.2",
       "azCode" : "xx-xxx-xx",
       "ip" : "192.168.0.x",
       "volume" : {
         "type" : "COMMON",
         "size" : 40
       }
     } ],
     "publicKibanaResp" : {
       "eipSize" : 5,
       "publicKibanaIp" : "100.95.158.x",
       "elbWhiteListResp" : {
         "whiteList" : "11.11.11.11",
         "enableWhiteList" : true
       }
     },
     "updated" : "2018-01-16T08:37:18",
     "name" : "ES-1-16-test17",
     "publicIp" : "100.95.149.xx:9200",
     "elbWhiteList" : {
       "whiteList" : "10.10.10.10",
       "enableWhiteList" : true
     },
     "created" : "2018-01-16T08:37:18",
     "id" : "5c77b71c-5b35-4f50-8984-76387e42451a",
     "status" : "200",
     "endpoint" : "192.168.0.x:9200",
     "vpcId" : "07e7ab39-xxx-xxx-xxx-d3f28ea7f051",
     "subnetId" : "025d45f9-xxx-xxx-xxx-e852c6455a5e",
     "securityGroupId" : "0347aabc-xxx-xxx-xxx-6b10a79701e2",
     "vpcepIp" : "192.168.0.203",
     "bandwidthSize" : 0,
     "diskEncrypted" : false,
     "httpsEnable" : true,
     "authorityEnable" : true,
     "backupAvailable" : true,
     "actionProgress" : { },
     "actions" : [ ],
     "enterpriseProjectId" : "3e1c74a0-xxx-xxx-xxx-c6b9e46cf81b",
     "tags" : [ {
       "key" : "k1",
       "value" : "v1"
     } ]
   }

Status Codes
------------

+-----------------------------------+--------------------------------------------+
| Status Code                       | Description                                |
+===================================+============================================+
| 200                               | Request succeeded.                         |
+-----------------------------------+--------------------------------------------+
| 400                               | Invalid request.                           |
|                                   |                                            |
|                                   | Modify the request before retry.           |
+-----------------------------------+--------------------------------------------+
| 404                               | The requested resource could not be found. |
|                                   |                                            |
|                                   | Modify the request before retry.           |
+-----------------------------------+--------------------------------------------+
