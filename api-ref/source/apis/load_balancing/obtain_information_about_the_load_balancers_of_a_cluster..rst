:original_name: ShowElbDetail.html

.. _ShowElbDetail:

Obtain information about the load balancers of a cluster.
=========================================================

Function
--------

This API is used to obtain information about the load balancers of a cluster.

URI
---

GET /v1.0/{project_id}/clusters/{cluster_id}/es-listeners

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                      |
   +============+===========+========+==================================================================================================================================+
   | project_id | Yes       | String | Project ID. For details about how to obtain the project ID and name, see :ref:`Obtaining the Project ID and Name <css_03_0071>`. |
   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------+
   | cluster_id | Yes       | String | ID of the cluster you want to query.                                                                                             |
   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 2** Query Parameters

   +-----------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Mandatory | Type   | Description                                                                                                                                                                                                                                    |
   +===========+===========+========+================================================================================================================================================================================================================================================+
   | type      | No        | String | Type: **searchTool** indicates that load balancer information is queried for Elasticsearch/OpenSearch. **viewTool** indicates that load balancer information is queried for Kibana/OpenSearch Dashboards. The default value is **searchTool**. |
   +-----------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | Parameter           | Type                                                                | Description                       |
   +=====================+=====================================================================+===================================+
   | serverCertName      | String                                                              | Server certificate name           |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | serverCertId        | String                                                              | Server certificate ID             |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | cacertName          | String                                                              | CA certificate name               |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | cacertId            | String                                                              | CA certificate ID                 |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | elb_enable          | Boolean                                                             | Indicates whether ELB is enabled. |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | authentication_type | String                                                              | Authentication mode               |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | loadBalancer        | :ref:`LoadBalancer <showelbdetail__response_loadbalancer>` object   | Load balancer object information  |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | listener            | :ref:`Elbv3Listener <showelbdetail__response_elbv3listener>` object | Listener object information.      |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+
   | healthmonitors      | Array of :ref:`Member <showelbdetail__response_member>` objects     | Health check result set           |
   +---------------------+---------------------------------------------------------------------+-----------------------------------+

.. _showelbdetail__response_loadbalancer:

.. table:: **Table 4** LoadBalancer

   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter           | Type                                                                          | Description                                                                                                                                                                                  |
   +=====================+===============================================================================+==============================================================================================================================================================================================+
   | id                  | String                                                                        | Load balancer ID.                                                                                                                                                                            |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                | String                                                                        | Load balancer name                                                                                                                                                                           |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | guaranteed          | String                                                                        | Whether the LB is for dedicated use. The value can be false (shared) or true (dedicated).                                                                                                    |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | billing_info        | String                                                                        | Resource billing information. If the value is left blank, the resource will be billed in pay-per-use mode. If the value is not left blank, the resource is billed on a yearly/monthly basis. |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description         | String                                                                        | Description.                                                                                                                                                                                 |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_id              | String                                                                        | ID of the VPC to which the load balancer belongs                                                                                                                                             |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | provisioning_status | String                                                                        | Provisioning status of the load balancer                                                                                                                                                     |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | listeners           | Array of :ref:`IdListWrapper <showelbdetail__response_idlistwrapper>` objects | Associated listener list                                                                                                                                                                     |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vip_address         | String                                                                        | IPv4 virtual IP address bound to the load balancer                                                                                                                                           |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vip_port_id         | String                                                                        | Port ID bound to the private IPv4 IP address of the load balancer.                                                                                                                           |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipv6_vip_address    | String                                                                        | IPv6 address of the load balancer.                                                                                                                                                           |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | publicips           | Array of :ref:`PublicIpInfo <showelbdetail__response_publicipinfo>` objects   | EIP bound to the load balancer                                                                                                                                                               |
   +---------------------+-------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _showelbdetail__response_idlistwrapper:

.. table:: **Table 5** IdListWrapper

   ========= ====== ============
   Parameter Type   Description
   ========= ====== ============
   id        String Listener id.
   ========= ====== ============

.. _showelbdetail__response_publicipinfo:

.. table:: **Table 6** PublicIpInfo

   +------------------+---------+-----------------------------------------------------------------------------------+
   | Parameter        | Type    | Description                                                                       |
   +==================+=========+===================================================================================+
   | publicip_id      | String  | EIP configuration ID                                                              |
   +------------------+---------+-----------------------------------------------------------------------------------+
   | publicip_address | String  | Specifies the EIP.                                                                |
   +------------------+---------+-----------------------------------------------------------------------------------+
   | ip_version       | Integer | IP address version. Value range: 4 and 6. 4 indicates IPv4, and 6 indicates IPv6. |
   +------------------+---------+-----------------------------------------------------------------------------------+

.. _showelbdetail__response_elbv3listener:

.. table:: **Table 7** Elbv3Listener

   +---------------+-------------------------------------------------------------------------+---------------------------------------------+
   | Parameter     | Type                                                                    | Description                                 |
   +===============+=========================================================================+=============================================+
   | id            | String                                                                  | Listener ID.                                |
   +---------------+-------------------------------------------------------------------------+---------------------------------------------+
   | name          | String                                                                  | Listener name.                              |
   +---------------+-------------------------------------------------------------------------+---------------------------------------------+
   | protocol      | String                                                                  | Protocol used by the listener               |
   +---------------+-------------------------------------------------------------------------+---------------------------------------------+
   | protocol_port | Integer                                                                 | Port used by the listener.                  |
   +---------------+-------------------------------------------------------------------------+---------------------------------------------+
   | ipgroup       | :ref:`ListenerIpGroup <showelbdetail__response_listeneripgroup>` object | ipgroup information in the listener object. |
   +---------------+-------------------------------------------------------------------------+---------------------------------------------+

.. _showelbdetail__response_listeneripgroup:

.. table:: **Table 8** ListenerIpGroup

   +----------------+---------+------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter      | Type    | Description                                                                                                                        |
   +================+=========+====================================================================================================================================+
   | ipgroup_id     | String  | ID of the IP address group associated with the listener This parameter is mandatory during creation and is optional during update. |
   +----------------+---------+------------------------------------------------------------------------------------------------------------------------------------+
   | enable_ipgroup | Boolean | Status of an access control group. True: Enable access control. False: Disable access control.                                     |
   +----------------+---------+------------------------------------------------------------------------------------------------------------------------------------+

.. _showelbdetail__response_member:

.. table:: **Table 9** Member

   +------------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter        | Type    | Description                                                                                                                                                                                                                                                                                                |
   +==================+=========+============================================================================================================================================================================================================================================================================================================+
   | name             | String  | Specifies the backend server name.                                                                                                                                                                                                                                                                         |
   +------------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | address          | String  | Private IP address bound to the backend server.                                                                                                                                                                                                                                                            |
   +------------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | protocol_port    | Integer | Specifies the port used by the backend server.                                                                                                                                                                                                                                                             |
   +------------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | operating_status | String  | Specifies the operating status of the backend server. - ONLINE: The backend server is running normally. - NO_MONITOR: No health check is configured for the backend server group to which the backend server belongs. - OFFLINE: The cloud server used as the backend server is stopped or does not exist. |
   +------------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | instance_id      | String  | ID of the instance used as the backend server. If this parameter is left blank, the backend server is not an ECS.                                                                                                                                                                                          |
   +------------------+---------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

None

Example Responses
-----------------

**Status code: 200**

Request succeeded.

.. code-block::

   {
     "loadBalancer" : {
       "id" : "5d45faad-6cb3-479b-96b8-3e2de0cc6268",
       "name" : "elb-css",
       "guaranteed" : "true",
       "description" : "",
       "listeners" : [ {
         "id" : "011d14fa-908b-4cd9-b0d6-0768ddc6cb71"
       }, {
         "id" : "04b86029-c281-4490-a3bd-5ea1266658ba"
       } ],
       "publicips" : [ {
         "publicip_id" : "f678e23c-96a5-49e8-8ea2-bd8b47d41e78",
         "publicip_address" : "100.1.1.1",
         "ip_version" : 4
       } ],
       "billing_info" : null,
       "vpc_id" : "4f3deec3-efa8-4598-bf91-560aad1377a3",
       "provisioning_status" : "ACTIVE",
       "vip_address" : "10.0.0.1",
       "ipv6_vip_address" : "2409:27ff:2003:3e:1fd::f3"
     },
     "listener" : {
       "id" : "41ff041d-c7b9-4142-9167-fa93d54f97da",
       "name" : "css-searchServer",
       "protocol" : "HTTPS",
       "ipgroup" : null,
       "protocol_port" : 9265
     },
     "healthmonitors" : [ {
       "instance_id" : "bac86342-2222-43e6-817f-57f040a174a6",
       "name" : "",
       "address" : "10.0.0.87",
       "protocol_port" : 9200,
       "operating_status" : "ONLINE"
     }, {
       "instance_id" : "d935b82c-f94b-4ae0-9997-ddc90885d8c6",
       "name" : "",
       "address" : "10.0.0.61",
       "protocol_port" : 9200,
       "operating_status" : "ONLINE"
     } ],
     "serverCertName" : "server1",
     "serverCertId" : "82375af01c0d40f6a44c15962c570625",
     "cacertName" : null,
     "cacertId" : null,
     "elb_enable" : true,
     "authentication_type" : "single"
   }

Status Codes
------------

+-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
| Status Code                       | Description                                                                                                                                      |
+===================================+==================================================================================================================================================+
| 200                               | Request succeeded.                                                                                                                               |
+-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
| 400                               | Invalid request.                                                                                                                                 |
|                                   |                                                                                                                                                  |
|                                   | Modify the request instead of retrying.                                                                                                          |
+-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
| 409                               | The request cannot be processed due to a conflict.                                                                                               |
|                                   |                                                                                                                                                  |
|                                   | This status code indicates that the resource that the client attempts to create already exits, or the requested update failed due to a conflict. |
+-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
| 412                               | The server does not meet one of the requirements that the requester puts on the request.                                                         |
+-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

Error Codes
-----------

See :ref:`Error Codes <css_03_0076>`.
