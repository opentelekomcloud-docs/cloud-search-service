:original_name: CreateCluster.html

.. _CreateCluster:

Creating a cluster
==================

Function
--------

This API is used to create a cluster.

URI
---

POST /v1.0/{project_id}/clusters

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                      |
   +============+===========+========+==================================================================================================================================+
   | project_id | Yes       | String | Project ID. For details about how to obtain the project ID and name, see :ref:`Obtaining the Project ID and Name <css_03_0071>`. |
   +------------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +-----------+-----------+----------------------------------------------------------------------------+-----------------+
   | Parameter | Mandatory | Type                                                                       | Description     |
   +===========+===========+============================================================================+=================+
   | cluster   | Yes       | :ref:`CreateClusterBody <createcluster__request_createclusterbody>` object | Cluster object. |
   +-----------+-----------+----------------------------------------------------------------------------+-----------------+

.. _createcluster__request_createclusterbody:

.. table:: **Table 3** CreateClusterBody

   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory       | Type                                                                                                   | Description                                                                                                                                                                                                                                                          |
   +=======================+=================+========================================================================================================+======================================================================================================================================================================================================================================================================+
   | instance              | Yes             | :ref:`CreateClusterInstanceBody <createcluster__request_createclusterinstancebody>` object             | Instance.                                                                                                                                                                                                                                                            |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | datastore             | Yes             | :ref:`CreateClusterDatastoreBody <createcluster__request_createclusterdatastorebody>` object           | Search engine.                                                                                                                                                                                                                                                       |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | Yes             | String                                                                                                 | Cluster name It can contain 4 to 32 characters. Only digits, letters, hyphens (-), and underscores (_) are allowed. The value must start with a letter.                                                                                                              |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | instanceNum           | Yes             | Integer                                                                                                | Number of clusters. The value range is 1 to 32.                                                                                                                                                                                                                      |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | backupStrategy        | No              | :ref:`CreateClusterBackupStrategyBody <createcluster__request_createclusterbackupstrategybody>` object | Automatic snapshot creation policy, which is disabled by default.                                                                                                                                                                                                    |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | The automatic snapshot creation policy is enabled only if **backupStrategy** is not left blank.                                                                                                                                                                      |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | httpsEnable           | No              | Boolean                                                                                                | Whether communication is encrypted on the cluster. The value can be **true** or **false**. By default, communication encryption is disabled. If **httpsEnable** is set to **true**, **authorityEnable** must be set to **true**.                                     |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | -  **true**: Communication is encrypted on the cluster.                                                                                                                                                                                                              |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | -  **false**: Communication is not encrypted on the cluster.                                                                                                                                                                                                         |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | This parameter is supported in clusters 6.5.4 or later.                                                                                                                                                                                                              |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | authorityEnable       | No              | Boolean                                                                                                | Whether to enable authentication. The value can be **true** or **false**. Authentication is disabled by default.                                                                                                                                                     |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | -  **true** indicates that authentication is enabled for the cluster.                                                                                                                                                                                                |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | -  **true** indicates that authentication is enabled for the cluster.                                                                                                                                                                                                |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | This parameter is supported in clusters 6.5.4 or later.                                                                                                                                                                                                              |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | adminPwd              | No              | String                                                                                                 | Password of the cluster user **admin** in security mode. This parameter is mandatory only if **authorityEnable** is set to **true**.                                                                                                                                 |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | -  The administrator password must meet the following requirements:                                                                                                                                                                                                  |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        |    -  The password can contain 8 to 32 characters.                                                                                                                                                                                                                   |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        |    -  Passwords must contain at least three of the following character types: uppercase letters, lowercase letters, digits, and special characters (``~!@#$%^&*()-_=+\|[{}];:,<.>/?``).                                                                              |
   |                       |                 |                                                                                                        |                                                                                                                                                                                                                                                                      |
   |                       |                 |                                                                                                        | -  Weak password verification is required for a security cluster. You are advised to set a strong password.                                                                                                                                                          |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | No              | String                                                                                                 | Enterprise project ID. When creating a cluster, associate the enterprise project ID with the cluster. The value can contain a maximum of 36 characters. It is string **0** or in UUID format with hyphens (-). Value **0** indicates the default enterprise project. |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tags                  | No              | Array of :ref:`CreateClusterTagsBody <createcluster__request_createclustertagsbody>` objects           | Cluster tag.                                                                                                                                                                                                                                                         |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipv6_enable           | No              | Boolean                                                                                                | Whether to enable automatic IPv6 address assignment for the cluster. The default value is false.                                                                                                                                                                     |
   +-----------------------+-----------------+--------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createcluster__request_createclusterinstancebody:

.. table:: **Table 4** CreateClusterInstanceBody

   +-------------------+-----------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter         | Mandatory       | Type                                                                                                   | Description                                                                                                                                                                                                                                                                                                                   |
   +===================+=================+========================================================================================================+===============================================================================================================================================================================================================================================================================================================================+
   | flavorRef         | Yes             | String                                                                                                 | Instance flavor. For details about the current instance flavor, see the **name** attribute in :ref:`Obtaining the Instance Specifications List <listflavors>`.                                                                                                                                                                |
   +-------------------+-----------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volume            | Yes             | :ref:`CreateClusterInstanceVolumeBody <createcluster__request_createclusterinstancevolumebody>` object | Volume information. You do not need to set this parameter when flavorRef is set to a local disk flavor. Currently, the following local disk flavors are supported:                                                                                                                                                            |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | -  ess.spec-i3small                                                                                                                                                                                                                                                                                                           |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | -  ess.spec-i3medium                                                                                                                                                                                                                                                                                                          |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | -  ess.spec-i3.8xlarge.8                                                                                                                                                                                                                                                                                                      |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | -  ess.spec-ds.xlarge.8                                                                                                                                                                                                                                                                                                       |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | -  ess.spec-ds.2xlarge.8                                                                                                                                                                                                                                                                                                      |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | -  ess.spec-ds.4xlarge.8                                                                                                                                                                                                                                                                                                      |
   +-------------------+-----------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | nics              | Yes             | :ref:`CreateClusterInstanceNicsBody <createcluster__request_createclusterinstancenicsbody>` object     | Subnet ID.                                                                                                                                                                                                                                                                                                                    |
   +-------------------+-----------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | availability_zone | Yes             | String                                                                                                 | Availability zone (AZ). You need to specify the AZ name.                                                                                                                                                                                                                                                                      |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | By default, a single AZ is specified. If multiple AZs are specified, use commas (,) to separate AZ names. Take CN North-Beijing4 as an example. If three AZs are selected, the value of availability_zone is cn-north-4a,cn-north-4b,cn-north-4c. If a single AZ is used, the value of availability_zone is empty by default. |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        | .. note::                                                                                                                                                                                                                                                                                                                     |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        |    NOTE                                                                                                                                                                                                                                                                                                                       |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        |    - If multiple AZs are selected, the name of each AZ must be unique, and the number of nodes must be greater than or equal to the number of AZs.                                                                                                                                                                            |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        |    - If the number of nodes is a multiple of the number of AZs, the nodes are evenly distributed to each AZ.                                                                                                                                                                                                                  |
   |                   |                 |                                                                                                        |                                                                                                                                                                                                                                                                                                                               |
   |                   |                 |                                                                                                        |    - If the number of nodes is not a multiple of the number of AZs, the absolute difference between node quantity in any two AZs is 1 at most.                                                                                                                                                                                |
   +-------------------+-----------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createcluster__request_createclusterinstancevolumebody:

.. table:: **Table 5** CreateClusterInstanceVolumeBody

   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                               |
   +=================+=================+=================+===========================================================================================================================================================================================================================+
   | volume_type     | Yes             | String          | Volume type                                                                                                                                                                                                               |
   |                 |                 |                 |                                                                                                                                                                                                                           |
   |                 |                 |                 | -  COMMON: common I/O                                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                           |
   |                 |                 |                 | -  HIGH: high I/O                                                                                                                                                                                                         |
   |                 |                 |                 |                                                                                                                                                                                                                           |
   |                 |                 |                 | -  ULTRAHIGH: ultra-high I/O                                                                                                                                                                                              |
   |                 |                 |                 |                                                                                                                                                                                                                           |
   |                 |                 |                 | -  ESSD: ultra-fast SSD                                                                                                                                                                                                   |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | size            | Yes             | Integer         | Volume size. The value must be greater than 0 and a multiple of 4 and 10. For details about the local disk size, see the diskrange attribute in :ref:`Obtaining the Instance Specifications List <listflavors>`. Unit: GB |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createcluster__request_createclusterinstancenicsbody:

.. table:: **Table 6** CreateClusterInstanceNicsBody

   +-----------------+-----------+--------+--------------------------------------------------------+
   | Parameter       | Mandatory | Type   | Description                                            |
   +=================+===========+========+========================================================+
   | vpcId           | Yes       | String | VPC ID, which is used for configuring cluster network. |
   +-----------------+-----------+--------+--------------------------------------------------------+
   | netId           | Yes       | String | Subnet ID (network ID).                                |
   +-----------------+-----------+--------+--------------------------------------------------------+
   | securityGroupId | Yes       | String | Security group ID.                                     |
   +-----------------+-----------+--------+--------------------------------------------------------+

.. _createcluster__request_createclusterdatastorebody:

.. table:: **Table 7** CreateClusterDatastoreBody

   +-----------+-----------+--------+--------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Mandatory | Type   | Description                                                                                                              |
   +===========+===========+========+==========================================================================================================================+
   | version   | Yes       | String | Elasticsearch/Logstash engine version. For details, see the supported versions in :ref:`Before You Start <css_03_0001>`. |
   +-----------+-----------+--------+--------------------------------------------------------------------------------------------------------------------------+
   | type      | Yes       | String | Engine type. The value can be elasticsearch, logstash, or opensearch.                                                    |
   +-----------+-----------+--------+--------------------------------------------------------------------------------------------------------------------------+

.. _createcluster__request_createclusterbackupstrategybody:

.. table:: **Table 8** CreateClusterBackupStrategyBody

   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   +=================+=================+=================+=============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | period          | Yes             | String          | Time when a snapshot is generated every day. Snapshots can only be generated on the hour. The format is HH:mm z: HH:mm refers to the hour time and z refers to the time zone. For example, 00:00 GMT+08:00 and 01:00 GMT+08:00.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |    The default value is 00:00 GMT+08:00. When frequency is set to HOUR, you do not need to specify period. By default, snapshot creation starts from the next hour after the settings are successful.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | prefix          | Yes             | String          | Prefix of a snapshot that is automatically created, which is manually entered. Enter up to 32 characters and start with a lowercase letter. Lowercase letters, digits, hyphens (-), and underscores (_) are allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | keepday         | Yes             | Integer         | Set the number of retained snapshots. The value ranges from 1 to 90. Expired snapshots will be automatically deleted on the half hour. The deletion policy applies only to automated snapshots that are executed at the same frequency as the current automatic snapshot creation policy.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bucket          | No              | String          | Name of the OBS bucket used for backup.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | basePath        | No              | String          | Storage path of the snapshot in the OBS bucket.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | agency          | No              | String          | IAM agency used to access OBS.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 | If none of the bucket, basePath, and agency parameters are specified, the system will automatically create an OBS bucket and an IAM agency. If the creation fails, you need to manually configure correct parameters.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | frequency       | No              | String          | Frequency of automatically creating snapshots.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                 |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   |                 |                 |                 |    The default value is DAY. If this parameter is set to HOUR, the scheduled task is executed every hour. If this parameter is set to DAY, the scheduled task is executed every day. If this parameter is set to SUN, MON, TUE, WED, THU, FRI or SAT, the scheduled task is executed at the specified day of every week. For example, SUN indicates that the task is executed once every Sunday. The number of retained snapshots depends on the execution frequency and indexes set in the automatic snapshot creation policy. If the execution interval is short or the index data volume is large, the number of retained automatic snapshots may not reach the preset value. Set this value based on actual conditions. |
   +-----------------+-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _createcluster__request_createclustertagsbody:

.. table:: **Table 9** CreateClusterTagsBody

   +-----------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Mandatory | Type   | Description                                                                                                                                                                                                                                   |
   +===========+===========+========+===============================================================================================================================================================================================================================================+
   | key       | Yes       | String | Separate multiple AZs with commas (,). For example, to specify three AZs in CN North-Beijing4, you can set availability_zone to cn-north-4a,cn-north-4b,cn-north-4c. By default, a single AZ is created when this parameter is not specified. |
   +-----------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | value     | Yes       | String | Tag value. The value can contain 0 to 43 characters. It can only contain digits, letters, hyphens (-), and underscores (_).                                                                                                                   |
   +-----------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 10** Response body parameters

   +-----------+---------------------------------------------------------------------------------------------------+-----------------+
   | Parameter | Type                                                                                              | Description     |
   +===========+===================================================================================================+=================+
   | cluster   | :ref:`CreateClusterClusterResponse <createcluster__response_createclusterclusterresponse>` object | Cluster object. |
   +-----------+---------------------------------------------------------------------------------------------------+-----------------+

.. _createcluster__response_createclusterclusterresponse:

.. table:: **Table 11** CreateClusterClusterResponse

   ========= ====== ============
   Parameter Type   Description
   ========= ====== ============
   id        String Cluster ID.
   name      String Cluster name
   ========= ====== ============

Example Requests
----------------

Example request for creating a pay-per-use cluster.

.. code-block:: text

   POST /v1.0/6204a5bd270343b5885144cf9c8c158d/clusters

   {
     "cluster" : {
       "instance" : {
         "flavorRef" : "ess.spec-4u16g",
         "volume" : {
           "volume_type" : "COMMON",
           "size" : 120
         },
         "nics" : {
           "vpcId" : "{VPC ID}",
           "netId" : "{NET ID}",
           "securityGroupId" : "{Security group ID}"
         },
         "availability_zone" : "{AZ CODE}"
       },
       "datastore" : {
         "version" : "{cluster-version}",
         "type" : "elasticsearch"
       },
       "name" : "cluster-name",
       "instanceNum" : 3,
       "backupStrategy" : {
         "period" : "16:00 GMT+08:00",
         "prefix" : "snapshot",
         "keepday" : 7,
         "frequency" : "DAY",
         "bucket" : "css-obs-backup",
         "basePath" : "css_repository/obs-path",
         "agency" : "css_obs_agency"
       },
       "httpsEnable" : true,
       "authorityEnable" : true,
       "adminPwd" : "{password}",
       "enterprise_project_id" : "0",
       "tags" : [ {
         "key" : "k1",
         "value" : "v1"
       }, {
         "key" : "k2",
         "value" : "v2"
       } ]
     }
   }

Example Responses
-----------------

**Status code: 200**

Request succeeded.

-  Example response for creating a pay-per-use cluster.

   .. code-block::

      {
        "cluster" : {
          "id" : "ef683016-871e-48bc-bf93-74a29d60d214",
          "name" : "ES-Test"
        }
      }

Status Codes
------------

+-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
| Status Code                       | Description                                                                                                                        |
+===================================+====================================================================================================================================+
| 200                               | Request succeeded.                                                                                                                 |
+-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
| 400                               | Invalid request.                                                                                                                   |
|                                   |                                                                                                                                    |
|                                   | Modify the request before retry.                                                                                                   |
+-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
| 409                               | The request could not be completed due to a conflict with the current state of the resource.                                       |
|                                   |                                                                                                                                    |
|                                   | The resource that the client attempts to create already exists, or the update request fails to be processed because of a conflict. |
+-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
| 412                               | The server did not meet one of the preconditions contained in the request.                                                         |
+-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------+

Error Codes
-----------

See :ref:`Error Codes <css_03_0076>`.
