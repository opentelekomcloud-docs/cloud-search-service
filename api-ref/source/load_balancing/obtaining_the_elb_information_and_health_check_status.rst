:original_name: css_03_0129.html

.. _css_03_0129:

Obtaining the ELB Information and Health Check Status
=====================================================

Function
--------

This API is used to obtain the ES ELB information and health check status.

URI
---

GET /v1.0/{project_id}/clusters/{cluster_id}/es-listeners

.. table:: **Table 1** Path parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                        |
   +============+===========+========+====================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <css_03_0071>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------+
   | cluster_id | Yes       | String | ID of the cluster to be queried                                                    |
   +------------+-----------+--------+------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 2** Response body parameter

   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | Parameter           | Type                                                                                    | Description                       |
   +=====================+=========================================================================================+===================================+
   | serverCertName      | String                                                                                  | Server certificate name           |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | serverCertId        | String                                                                                  | Server certificate ID             |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | cacertName          | String                                                                                  | CA certificate name               |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | cacertId            | String                                                                                  | CA certificate ID                 |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | elb_enable          | Boolean                                                                                 | Indicates whether ELB is enabled. |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | authentication_type | String                                                                                  | Authentication mode               |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | loadBalancer        | :ref:`EsLoadBalancerResource <css_03_0129__response_esloadbalancerresource>` object     | Load balancer object information  |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+
   | healthmonitors      | :ref:`EsHealthmonitorsResource <css_03_0129__response_eshealthmonitorsresource>` object | Health check result set           |
   +---------------------+-----------------------------------------------------------------------------------------+-----------------------------------+

.. _css_03_0129__response_esloadbalancerresource:

.. table:: **Table 3** EsLoadBalancerResource

   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | Parameter             | Type                                                                          | Description                                                   |
   +=======================+===============================================================================+===============================================================+
   | id                    | String                                                                        | Load balancer ID                                              |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | name                  | String                                                                        | Load balancer name                                            |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | guaranteed            | String                                                                        | Indicates whether the load balancer is of the dedicated type. |
   |                       |                                                                               |                                                               |
   |                       |                                                                               | -  **false**: shared load balancer                            |
   |                       |                                                                               | -  **true**: dedicated load balancer                          |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | description           | String                                                                        | Template description                                          |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | vpc_id                | String                                                                        | ID of the VPC where the load balancer resides                 |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | provisioning_status   | String                                                                        | Status of the load balancer                                   |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | listeners             | :ref:`EsListenersResource <css_03_0129__response_eslistenersresource>` object | Associated listeners.                                         |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | vip_address           | String                                                                        | IPv4 virtual IP address bound to the load balancer            |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+
   | publicips             | :ref:`EsPublicipsResource <css_03_0129__response_espublicipsresource>` object | EIP bound to the load balancer                                |
   +-----------------------+-------------------------------------------------------------------------------+---------------------------------------------------------------+

.. _css_03_0129__response_eslistenersresource:

.. table:: **Table 4** EsListenersResource

   ========= ====== ===========
   Parameter Type   Description
   ========= ====== ===========
   id        String Listener ID
   ========= ====== ===========

.. _css_03_0129__response_espublicipsresource:

.. table:: **Table 5** EsPublicipsResource

   +-----------------------+-----------------------+-----------------------+
   | Parameter             | Type                  | Description           |
   +=======================+=======================+=======================+
   | publicip_id           | String                | EIP configuration ID  |
   +-----------------------+-----------------------+-----------------------+
   | publicip_address      | String                | IP address            |
   +-----------------------+-----------------------+-----------------------+
   | ip_version            | String                | IP address version.   |
   |                       |                       |                       |
   |                       |                       | -  **4**: IPv4        |
   |                       |                       | -  **6**: IPv6        |
   +-----------------------+-----------------------+-----------------------+

.. _css_03_0129__response_eshealthmonitorsresource:

.. table:: **Table 6** EsHealthmonitorsResource

   +---------------+---------------------------------------------------------------------------------------+---------------------------------------------------+
   | Parameter     | Type                                                                                  | Description                                       |
   +===============+=======================================================================================+===================================================+
   | id            | String                                                                                | Backend server ID                                 |
   +---------------+---------------------------------------------------------------------------------------+---------------------------------------------------+
   | name          | String                                                                                | Backend server name                               |
   +---------------+---------------------------------------------------------------------------------------+---------------------------------------------------+
   | protocol_port | String                                                                                | Frontend listening port of the backend service    |
   +---------------+---------------------------------------------------------------------------------------+---------------------------------------------------+
   | ipgroup       | :ref:`EsHealthIpgroupResource <css_03_0129__response_eshealthipgroupresource>` object | Access control information of the listener object |
   +---------------+---------------------------------------------------------------------------------------+---------------------------------------------------+

.. _css_03_0129__response_eshealthipgroupresource:

.. table:: **Table 7** EsHealthIpgroupResource

   +----------------+---------+-------------------------------------------------------------+
   | Parameter      | Type    | Description                                                 |
   +================+=========+=============================================================+
   | ipgroup_id     | String  | ID of the access control group associated with the listener |
   +----------------+---------+-------------------------------------------------------------+
   | enable_ipgroup | Boolean | Access control group status                                 |
   +----------------+---------+-------------------------------------------------------------+
   | type           | String  | Access control group type                                   |
   +----------------+---------+-------------------------------------------------------------+

Request Example
---------------

None

Response Example
----------------

**Status code: 200**

The request is processed successfully.

.. code-block::

   {
     "loadBalancer" : {
       "id" : "5d45faad-6cb3-479b-96b8-3e2de0cc6268",
       "name" : "elb-css",
       "guaranteed" : "true",
       "description" : "",
       "listeners" : [ {
         "id" : "011d14fa-908b-4cd9-b0d6-0768ddc6cb71"
       }, {
         "id" : "04b86029-c281-4490-a3bd-5ea1266658ba"
       } ],
       "publicips" : [ {
         "publicip_id" : "f678e23c-96a5-49e8-8ea2-bd8b47d41e78",
         "publicip_address" : "100.1.1.1",
         "ip_version" : 4
       } ],
       "billing_info" : null,
       "vpc_id" : "4f3deec3-efa8-4598-bf91-560aad1377a3",
       "provisioning_status" : "ACTIVE",
       "vip_address" : "10.0.0.1"
     },
     "listener" : {
       "id" : "41ff041d-c7b9-4142-9167-fa93d54f97da",
       "name" : "css-searchServer",
       "protocol" : "HTTPS",
       "ipgroup" : null,
       "protocol_port" : 9265
     },
     "healthmonitors" : [ {
       "id" : "bac86342-2222-43e6-817f-57f040a174a6",
       "name" : "",
       "address" : "10.0.0.87",
       "protocol_port" : 9200,
       "operating_status" : "ONLINE"
     }, {
       "id" : "d935b82c-f94b-4ae0-9997-ddc90885d8c6",
       "name" : "",
       "address" : "10.0.0.61",
       "protocol_port" : 9200,
       "operating_status" : "ONLINE"
     } ],
     "serverCertName" : "server1",
     "serverCertId" : "82375af01c0d40f6a44c15962c570625",
     "cacertName" : null,
     "cacertId" : null,
     "elb_enable" : true,
     "authentication_type" : "single"
   }

Status Codes
------------

+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Status Code                       | Description                                                                                                                                                                         |
+===================================+=====================================================================================================================================================================================+
| 200                               | The request is processed successfully.                                                                                                                                              |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 400                               | Invalid request.                                                                                                                                                                    |
|                                   |                                                                                                                                                                                     |
|                                   | Modify the request instead of retrying.                                                                                                                                             |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 409                               | The request cannot be processed due to a conflict.                                                                                                                                  |
|                                   |                                                                                                                                                                                     |
|                                   | This status code indicates that the resource that the client attempts to create already exists, or the request fails to be processed because of the update of the conflict request. |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 412                               | The server does not meet one of the requirements that the requester puts on the request.                                                                                            |
+-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Error Codes
-----------

See :ref:`Error Codes <css_03_0076>`.
